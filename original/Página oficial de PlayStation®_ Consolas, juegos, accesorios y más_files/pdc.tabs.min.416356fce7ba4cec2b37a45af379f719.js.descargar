/*!
 * @sie/designkit
 * @copyright     2023 Sony Interactive Entertainment LLC, all rights reserved
 */

!function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function a(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function n(t){var e=i(t,"string");return"symbol"==typeof e?e:String(e)}var o=({IS_PORTRAIT:(window.matchMedia&&matchMedia("(orientation: portrait)")||{}).matches,IS_LANDSCAPE:(window.matchMedia&&matchMedia("(orientation: landscape)")||{}).matches,IS_MOBILE:(window.matchMedia&&matchMedia("(max-width: 767px)")||{}).matches,IS_MOBILE_PORTRAIT:(window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{}).matches,IS_TABLET:(window.matchMedia&&matchMedia("(min-width: 768px)")||{}).matches,IS_DESKTOP:(window.matchMedia&&matchMedia("(min-width: 1024px)")||{}).matches},{IS_PORTRAIT:window.matchMedia&&matchMedia("(orientation: portrait)")||{},IS_LANDSCAPE:window.matchMedia&&matchMedia("(orientation: landscape)")||{},IS_JETSTREAM_MOBILE:window.matchMedia&&matchMedia("(max-width: 699px)")||{},IS_MOBILE:window.matchMedia&&matchMedia("(max-width: 767px)")||{},IS_MOBILE_PORTRAIT:window.matchMedia("(max-width: 767px) and (orientation: portrait)")||{},IS_TABLET:window.matchMedia&&matchMedia("(min-width: 768px)")||{},IS_TABLET_LG:window.matchMedia&&matchMedia("(min-width: 1024px)")||{},IS_LAPTOP:window.matchMedia&&matchMedia("(min-width: 1367px)")||{},IS_DESKTOP:window.matchMedia&&matchMedia("(min-width: 1920px)")||{},IS_MAX_TABLET:window.matchMedia&&matchMedia("(max-width: 1023px)")||{},IS_JUST_TABLET:window.matchMedia&&matchMedia("(min-width: 768px) and (max-width: 1365px)")||{},IS_JUST_LAPTOP:window.matchMedia&&matchMedia("(min-width: 1366px) and (max-width: 1919px)")||{}}),c=({IS_PORTRAIT:o.IS_PORTRAIT.matches,IS_LANDSCAPE:o.IS_LANDSCAPE.matches,IS_JETSTREAM_MOBILE:o.IS_JETSTREAM_MOBILE.matches,IS_MOBILE:o.IS_MOBILE.matches,IS_MOBILE_PORTRAIT:o.IS_MOBILE_PORTRAIT.matches,IS_TABLET:o.IS_TABLET.matches,IS_MAX_TABLET:o.IS_MAX_TABLET.matches,IS_TABLET_LG:o.IS_TABLET_LG.matches,IS_LAPTOP:o.IS_LAPTOP.matches,IS_DESKTOP:o.IS_DESKTOP.matches},{EMPTY_LABEL:"empty"}),s=function(t,e,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=e.offset().top,o=400;i&&(o=800,window.scrollTo(0,t.offset().top)),t.animate({scrollTop:n},{duration:o,step:function(t,a){var i=e.offset().top;a.end!=i&&(a.end=i)}}).animate({scrollTop:n-a},{duration:200,step:function(t,i){var n=e.offset().top-a;i.end!=n&&(i.end=n)}})},r=function(t){return t.toString().trim().replace(/[^a-z-_0-9]/gi,"")},d=function(){function e(){t(this,e),this.$els={win:_gpdc.elements.$window,htmlBody:$("html, body"),dkNav:$("#sony-bar.dk-nav__wrapper"),nav:$("#shared-nav-root #shared-nav-container"),tertiary:$("#jetstream-tertiary-nav .tertiary-container")},this.EVENT_CHANGE="hashchange.dkHashAnchor",this.EVENT_LOAD="load.dkHashAnchor",this.EVENT_CLICK="click.dkHashAnchor",this.pageLoad=!0,this.hashRegex=new RegExp("^#")}return a(e,[{key:"bind",value:function(){this.onHashChange=this.onHashChange.bind(this),this.onHashAnchorClick=this.onHashAnchorClick.bind(this)}},{key:"init",value:function(){var t=this;this.$els.win.on(this.EVENT_CHANGE,this.onHashChange),"complete"===document.readyState?(window.scrollTo(0,0),this.highlightTertiaryLink(),this.$els.win.trigger(this.EVENT_CHANGE)):this.$els.win.on(this.EVENT_LOAD,function(){return window.scrollTo(0,0),t.highlightTertiaryLink(),t.$els.win.trigger(t.EVENT_CHANGE)});var e='a[href^="#"]';$("#gdk__content ".concat(e)).on(this.EVENT_CLICK,this.onHashAnchorClick),this.$els.tertiary.on(this.EVENT_CLICK,e,this.onHashAnchorClick),_gpdc.Logger.logInitializer("core","common","Hash Anchor Plugin")}},{key:"onHashAnchorClick",value:function(t){var e=$(t.currentTarget).attr("href")||"";if(location.href.includes(e)&&e.length>1)return this.scrollToElementByHash(e),!1}},{key:"onHashChange",value:function(t){var e=window.location.hash;if(e){t.preventDefault();var a=window.htmlEncode(e);return a.includes("?")?void this.sanitizeHashUrl(a):void this.scrollToElementByHash(a)}}},{key:"scrollToElementByHash",value:function(t){t=r(t),t=this.hashRegex.test(t)?t:"#".concat(t);var e=$("".concat(t,', [name="').concat(t.substring(1),'"]')).first();if(e.length){var a=(e.offset().top,this.calculateNavigationOffset());location.href.includes(t)&&s(this.$els.htmlBody,e,a)}}},{key:"highlightTertiaryLink",value:function(){var t=window.location.hash;if(!this.pageLoad||!t||"#"===t||!this.$els.tertiary.length)return void(this.pageLoad=!1);var e=window.htmlEncode(t);this.pageLoad=!1;var a=this.$els.tertiary.find(".tertiary-tab__link"),i=this.$els.tertiary.find('.tertiary-tab__link[href="'.concat(e,'"]'));a.length&&i.length&&(a.removeClass("tertiary-tab__link--active"),i.addClass("tertiary-tab__link--active"))}},{key:"calculateNavigationOffset",value:function(){var t=0;return this.$els.dkNav.length&&(t+=this.$els.dkNav.outerHeight()),this.$els.nav.length&&(t+=this.$els.nav.outerHeight()),this.$els.tertiary.length&&(t+=this.$els.tertiary.outerHeight()),t}},{key:"sanitizeHashUrl",value:function(t){var e=t.split("?");if(e){var a="".concat(location.origin).concat(location.pathname);window.location.replace("".concat(a,"?").concat(e[1]||"").concat(e[0]||""))}}}]),e}(),l=function(){function e(){t(this,e)}return a(e,[{key:"logTabsDtmEvent",value:function(t,e,a,i){t.closest(".tabs").data("include-tracking")!==!1&&(_gpdc.analytics.event.addGDLEvent("click","".concat(i," tabbedContainer"),{assetName:c.EMPTY_LABEL,position:a,label:e,moduleName:"tabbedContainer",elementType:"link",userActionFlag:!0,linkUrl:c.EMPTY_LABEL},t),_gpdc.analytics._satelliteTrack("user_engagement"))}},{key:"logTabLinksDtmEvent",value:function(t,e,a,i){_gpdc.analytics.event.addGDLEvent("click","".concat(i," store link"),{assetName:c.EMPTY_LABEL,position:a,label:e,moduleName:"PS Plus Games List",elementType:"link",userActionFlag:!1,linkUrl:t.attr("href")},t),_gpdc.analytics._satelliteTrack("store_click")}},{key:"tabPressed",value:function(t,e){if(e.hasClass("pills__item--active"))return void console.log("do nothing");var a=e.closest(".tabs").find(".tabs__content"),i=e.data("content-order"),n=a.find("[data-content-order='".concat(i,"']")),o=e.siblings(".pills__item--active").data("content-order")||1,c=a.find("[data-content-order='".concat(o,"']")),s="slideInLeft--fast",r="slideInRight--fast",d="slideOutLeft--fast",l="slideOutRight--fast",h="display--hidden",m=n.find("[data-component='media-carousel'], .simple-carousel");if(setTimeout(function(){n.find(".flickity-enabled").flickity("resize")},50),m.length>1){var u=m.closest(".tabs__tab-content:not(.display--hidden)"),f=u.find(".is-selected .media-block").height();m.find(".flickity-button").css("top",f/2),window.dispatchEvent(new Event("resize"))}i>o?(c.removeClass("".concat(s," ").concat(r," ").concat(d)).addClass("".concat(l," ").concat(h)),n.removeClass("".concat(s," ").concat(d," ").concat(l," ").concat(h)).addClass(r)):(c.removeClass("".concat(s," ").concat(r," ").concat(l)).addClass("".concat(d," ").concat(h)),n.removeClass("".concat(r," ").concat(d," ").concat(l," ").concat(h)).addClass(s)),this.logTabsDtmEvent(a,e.data("dtm-label"),i,"open")}},{key:"init",value:function(){var t=this;this.textDirection=_gpdc.config.textDirection,this.tabPressed=this.tabPressed.bind(this);var e=$('[data-component="tabs"]');e.find(".pills").on("change.dkPills",this.tabPressed);var a=e.find(".carousel");if(a.length){a.closest(".max-width--defaults").removeClass("max-width--defaults");var i=a.closest(".tabbed-component").find(".pills"),n="";if(i.data("sticky")){var o=new d,c=o.calculateNavigationOffset();e.css("--sticky-top","".concat(c,"px")),n="pills--sticky"}var s=a.closest(".tabbed-component");s.find(".tabs__title").addClass("max-width--defaults"),s.find(".pills").wrap('<div class="max-width--defaults '.concat(n,'"></div>')),window.dispatchEvent(new Event("resize"))}var r=e.find("div.tabs__tab-content p.txt-style-base > a");r.on("click.dkTabLink",function(e){var a=e.currentTarget,i=$(a);t.logTabLinksDtmEvent(i,i.data("dtm-label"),i.attr("dtm-position"),"select")}),_gpdc.Logger.logInitializer("tabs","components","Tabbed Containers")}}]),e}(),h=function(){function e(){var a=this;t(this,e),window._gpdc&&_gpdc.user&&"undefined"!=typeof _gpdc.user.isLoggedIn?this.initModules():_gpdc.elements.$document.one("userInfoSet.dkComponents",function(){return a.initModules()})}return a(e,[{key:"initModules",value:function(){(new l).init()}}]),e}();!function(t){_gpdc.elements.$document.ready(function(){window._dkDebug=!1,new h})}(jQuery)}();
